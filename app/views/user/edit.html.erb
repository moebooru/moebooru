<div id="user-edit">
  <%= form_tag(:controller => "user", :action => "update") do %>
    <table class="form">
      <tfoot>
        <tr>
          <td colspan="2">
            <%= submit_tag "Save" %> <%= submit_tag "Cancel" %>
          </td>
        </tr>
      </tfoot>
      <tbody>
        <tr>
          <th width="15%">
            <label class="block" for="user_blacklisted_tags">Tag Blacklist</label>
            <p>Any post containing all blacklisted tags on a line will be hidden. Separate tags with spaces.</p>
          </th>
          <td width="85%">
            <%= text_area "user", "blacklisted_tags", :size => "80x6" %>
          </td>
        </tr>
        <tr>
          <th>
            <label class="block" for="user_email">Email</label>
            <% if CONFIG["enable_account_email_activation"] %>
              <p>An email address is required to activate your account.</p>
            <% else %>
              <p>This field is optional. It is useful if you ever forget your password and want to reset it.</p>
            <% end %>
          </th>
          <td>
            <%= text_field "user", "email", :size => 40 %>
          </td>
        </tr>
        <tr>
          <th>
            <label class="block" for="user_tag_subscriptions_text">Tag Subscriptions</label>
          </th>
          <td class="large-text">
            <%= render :partial => "tag_subscription/user_listing", :locals => {:user => @user} %>
          </td>
        </tr>
        <tr>
          <th>
            <label class="block" for="user_my_tags">Edit Tags</label>
            <p>These will be accessible when you <a href="/post/upload">upload</a> or edit a post.</p>
          </th>
          <td>
            <%= text_area "user", "my_tags", :size => "40x5" %>
          </td>
        </tr>
        <tr>
          <th>
            <label class="block" for="user_always_resize_images">Resize Images</label>
            <p>If enabled, large images will always be resized to fit the screen.</p>
          </th>
          <td>
            <%= check_box "user", "always_resize_images" %>
          </td>
        </tr>
        <tr>
          <th>
            <label class="block" for="user_receive_dmails">Receive Mails</label>
            <p>Receive emails when someone sends you a message.</p>
          </th>
          <td>
            <%= check_box "user", "receive_dmails" %>
          </td>
        </tr>
        <% if CONFIG["image_samples"] && !CONFIG["force_image_samples"] %>
        <tr>
          <th>
            <label class="block" for="user_show_samples">Show Image Samples</label>
            <p>Show reduced large-resolution images.</p>
          </th>
          <td>
            <%= check_box "user", "show_samples" %>
          </td>
        </tr>
        <% end %>
        <tr>
          <th>
            <label class="block" for="user_use_browser">Use post browser</label>
            <p>Use the post browser when viewing posts and pools.</p>
          </th>
          <td>
            <%= check_box "user", "use_browser" %>
          </td>
        </tr>
        <tr>
          <th>
            <label class="block" for="user_show_advanced_editing">Advanced Editing</label>
            <p>Show advanced editing controls.</p>
          </th>
          <td>
            <%= check_box "user", "show_advanced_editing" %>
          </td>
        </tr>
	<% if CONFIG["translate_languages"] %>
        <tr>
          <th>
            <label class="block" for="user_language">Language</label>
            <p>Language to show comments in.</p>
          </th>
          <td>
            <select id="user_language" name="user[language]">
              <option value="" <%= @current_user.language.nil? ? 'selected="selected"':"" %>>Original (no translation)</option>
              <% for lang in CONFIG["translate_languages"] do %>
                <option value="<%= h(lang) %>" <%= @current_user.language == lang ? 'selected="selected"':"" %>><%= h(CONFIG["language_names"][lang]) %></option>
              <% end %>
            </select>
          </td>
        </tr>
        <tr>
          <th>
            <label class="block" for="user_secondary_languages">Secondary languages</label>
            <p>Languages to not translate from.</p>
          </th>
          <td>
            <select id="user_secondary_languages" name="user[secondary_language_array][]" multiple size="10">
              <option value="none" <%= @current_user.secondary_language_array.empty? ? 'selected="selected"':"" %>>(none)</option>
              <% for lang in CONFIG["known_languages"] do %>
                <option value="<%= h(lang) %>" <%= @current_user.secondary_language_array.include?(lang) ? 'selected="selected"':"" %>><%= h(CONFIG["language_names"][lang]) %></option>
              <% end %>
            </select>
          </td>
        </tr>
	<% end %>
      </tbody>
    </table>
  <% end %>
</div>

<%= render :partial => "footer" %>
